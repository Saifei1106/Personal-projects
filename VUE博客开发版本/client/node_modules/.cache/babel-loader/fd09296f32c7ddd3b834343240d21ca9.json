{"remainingRequest":"C:\\Users\\fly\\Desktop\\vue\\vue-08-实战\\开发版本\\client\\node_modules\\thread-loader\\dist\\cjs.js!C:\\Users\\fly\\Desktop\\vue\\vue-08-实战\\开发版本\\client\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\fly\\Desktop\\vue\\vue-08-实战\\开发版本\\client\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\fly\\Desktop\\vue\\vue-08-实战\\开发版本\\client\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!C:\\Users\\fly\\Desktop\\vue\\vue-08-实战\\开发版本\\client\\src\\components\\Login\\UserBox.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\fly\\Desktop\\vue\\vue-08-实战\\开发版本\\client\\src\\components\\Login\\UserBox.vue","mtime":1626705495537},{"path":"C:\\Users\\fly\\Desktop\\vue\\vue-08-实战\\开发版本\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\fly\\Desktop\\vue\\vue-08-实战\\开发版本\\client\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\fly\\Desktop\\vue\\vue-08-实战\\开发版本\\client\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\fly\\Desktop\\vue\\vue-08-实战\\开发版本\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\fly\\Desktop\\vue\\vue-08-实战\\开发版本\\client\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1624994108000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkM6L1VzZXJzL2ZseS9EZXNrdG9wL3Z1ZS92dWUtMDgtXHU1QjlFXHU2MjE4L1x1NUYwMFx1NTNEMVx1NzI0OFx1NjcyQy9jbGllbnQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgX29iamVjdFNwcmVhZCBmcm9tICJDOi9Vc2Vycy9mbHkvRGVza3RvcC92dWUvdnVlLTA4LVx1NUI5RVx1NjIxOC9cdTVGMDBcdTUzRDFcdTcyNDhcdTY3MkMvY2xpZW50L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgeyBtYXBTdGF0ZSwgbWFwTXV0YXRpb25zIH0gZnJvbSAidnVleCI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiVXNlckJveCIsCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHJhbmRvbTogIj9fPSIuY29uY2F0KERhdGUubm93KCkpCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IF9vYmplY3RTcHJlYWQoe30sIG1hcFN0YXRlKFsndXNlckluZm8nXSkpLAogIHdhdGNoOiB7CiAgICB1c2VySW5mbzogZnVuY3Rpb24gdXNlckluZm8oKSB7CiAgICAgIHRoaXMucmFuZG9tID0gIj9fPSIuY29uY2F0KERhdGUubm93KCkpOwogICAgfQogIH0sCiAgbWV0aG9kczogX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBtYXBNdXRhdGlvbnMoWydsb2dpbk91dCddKSksIHt9LCB7CiAgICAvL+mAgOWHuueZu+W9lQogICAgbG9nb3V0OiBmdW5jdGlvbiBsb2dvdXQoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciBfeWllbGQkX3RoaXMkJGF4aW9zLCBkYXRhOwoKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy4kYXhpb3MoewogICAgICAgICAgICAgICAgICBtZXRob2Q6ICJQT1NUIiwKICAgICAgICAgICAgICAgICAgdXJsOiAiL2xvZ2luL291dCIKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICBfeWllbGQkX3RoaXMkJGF4aW9zID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICAgIGRhdGEgPSBfeWllbGQkX3RoaXMkJGF4aW9zLmRhdGE7CgogICAgICAgICAgICAgICAgaWYgKCFkYXRhLmNvZGUpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDY7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgICAvL+mAgOWHuueZu+W9leaIkOWKnyzmuIXnqbp2dWV4CiAgICAgICAgICAgICAgICBfdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCLlt7LpgIDlh7rnmbvlvZUiKTsKCiAgICAgICAgICAgICAgICBfdGhpcy5sb2dpbk91dCgpOwoKICAgICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgLy/kv67mlLnkuKrkurrkv6Hmga8KICAgIGluZm86IGZ1bmN0aW9uIGluZm8oKSB7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCIvdXNlciIpOwogICAgfQogIH0pCn07"},{"version":3,"sources":["C:\\Users\\fly\\Desktop\\vue\\vue-08-实战\\开发版本\\client\\src\\components\\Login\\UserBox.vue"],"names":[],"mappings":";;;AA0BA,SAAQ,QAAR,EAAkB,YAAlB,QAAqC,MAArC;AAEA,eAAe;AACb,EAAA,IAAI,EAAE,SADO;AAEb,EAAA,IAFa,kBAEN;AACL,WAAO;AACL,MAAA,MAAM,eAAQ,IAAI,CAAC,GAAL,EAAR;AADD,KAAP;AAGD,GANY;AAOb,EAAA,QAAQ,oBACH,QAAQ,CAAC,CAAC,UAAD,CAAD,CADL,CAPK;AAUb,EAAA,KAAK,EAAE;AACL,IAAA,QADK,sBACM;AACT,WAAK,MAAL,gBAAoB,IAAI,CAAC,GAAL,EAApB;AACF;AAHK,GAVM;AAeb,EAAA,OAAO,kCACF,YAAY,CAAC,CAAC,UAAD,CAAD,CADV;AAEL;AACM,IAAA,MAHD,oBAGU;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBACM,KAAI,CAAC,MAAL,CAAY;AAC7B,kBAAA,MAAM,EAAE,MADqB;AAE7B,kBAAA,GAAG,EAAE;AAFwB,iBAAZ,CADN;;AAAA;AAAA;AACR,gBAAA,IADQ,uBACR,IADQ;;AAAA,qBAMT,IAAI,CAAC,IANI;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAQb;AACA,gBAAA,KAAI,CAAC,QAAL,CAAc,OAAd,CAAsB,OAAtB;;AACA,gBAAA,KAAI,CAAC,QAAL;;AAVa;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAWd,KAdI;AAeL;AACA,IAAA,IAhBK,kBAgBE;AACL,WAAK,OAAL,CAAa,IAAb,CAAkB,OAAlB;AACF;AAlBK;AAfM,CAAf","sourcesContent":["<template>\r\n  <div class=\"UserBox\">\r\n    <el-popover\r\n      placement=\"bottom-end\"\r\n      trigger=\"hover\"\r\n      :width=\"170\"\r\n    >\r\n      <template #reference>\r\n        <div\r\n          class=\"img\"\r\n          :style=\"{\r\n            backgroundImage: `url(${baseURL}${userInfo.photo}${random})`\r\n          }\"\r\n          :title=\"userInfo.user\"\r\n        ></div>\r\n      </template>\r\n      <div class=\"show\">\r\n        <el-button type=\"primary\" size=\"mini\" @click=\"info\">修改信息</el-button>\r\n        <el-button type=\"danger\" size=\"mini\" @click=\"logout\">退出登录</el-button>\r\n      </div>\r\n    </el-popover>\r\n\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {mapState, mapMutations} from \"vuex\"\r\n\r\nexport default {\r\n  name: \"UserBox\",\r\n  data() {\r\n    return {\r\n      random: `?_=${Date.now()}`\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapState(['userInfo'])\r\n  },\r\n  watch: {\r\n    userInfo() {\r\n      this.random = `?_=${Date.now()}`\r\n    }\r\n  },\r\n  methods: {\r\n    ...mapMutations(['loginOut']),\r\n    //退出登录\r\n    async logout() {\r\n      let {data} = await this.$axios({\r\n        method: \"POST\",\r\n        url: \"/login/out\"\r\n      })\r\n\r\n      if (data.code) return\r\n\r\n      //退出登录成功,清空vuex\r\n      this.$message.success(\"已退出登录\")\r\n      this.loginOut()\r\n    },\r\n    //修改个人信息\r\n    info() {\r\n      this.$router.push(\"/user\")\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n.UserBox {\r\n  width: 34px;\r\n  height: 34px;\r\n  padding: 8px 0;\r\n\r\n  .img {\r\n    width: 34px;\r\n    height: 34px;\r\n    background: none center center/cover;\r\n    border-radius: 50%;\r\n    cursor: pointer;\r\n  }\r\n}\r\n</style>\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n"],"sourceRoot":""}]}
{"remainingRequest":"C:\\Users\\fly\\Desktop\\vue\\vue-08-实战\\开发版本\\client\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\fly\\Desktop\\vue\\vue-08-实战\\开发版本\\client\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\fly\\Desktop\\vue\\vue-08-实战\\开发版本\\client\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!C:\\Users\\fly\\Desktop\\vue\\vue-08-实战\\开发版本\\client\\src\\components\\Admin\\ArticleAdd.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\fly\\Desktop\\vue\\vue-08-实战\\开发版本\\client\\src\\components\\Admin\\ArticleAdd.vue","mtime":1627305663514},{"path":"C:\\Users\\fly\\Desktop\\vue\\vue-08-实战\\开发版本\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\fly\\Desktop\\vue\\vue-08-实战\\开发版本\\client\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\fly\\Desktop\\vue\\vue-08-实战\\开发版本\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\fly\\Desktop\\vue\\vue-08-实战\\开发版本\\client\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1624994108000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkM6L1VzZXJzL2ZseS9EZXNrdG9wL3Z1ZS92dWUtMDgtXHU1QjlFXHU2MjE4L1x1NUYwMFx1NTNEMVx1NzI0OFx1NjcyQy9jbGllbnQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmNvbnN0cnVjdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIudXJsLmpzIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkFydGljbGVBZGQiLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBmb3JtOiB7CiAgICAgICAgdGl0bGU6ICIiLAogICAgICAgIGRlczogIiIsCiAgICAgICAgbWQ6ICIiLAogICAgICAgIGNvdmVyOiAiIgogICAgICB9LAogICAgICBpbWFnZVVybDogIiIKICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICAvL+WPkeihqOaMiemSrueCueWHuwogICAgc3VibWl0Rm9ybTogZnVuY3Rpb24gc3VibWl0Rm9ybSgpIHsKICAgICAgLy/ku47kuIrkvKBtZOW8gOWni++8jOWQjue7reeahOS4iuS8oOWcqOWvueW6lOeahOWbnuiwg+mHjOmdouWujOaIkAogICAgICB0aGlzLiRyZWZzLm1kRm9ybS5zdWJtaXQoKTsKICAgIH0sCiAgICAvL+aWh+eroOWPkeihqAogICAgc3VibWl0OiBmdW5jdGlvbiBzdWJtaXQoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciBfeWllbGQkX3RoaXMkJGF4aW9zLCBkYXRhOwoKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy4kYXhpb3MoewogICAgICAgICAgICAgICAgICBtZXRob2Q6ICJQT1NUIiwKICAgICAgICAgICAgICAgICAgdXJsOiAiL2FkbWluU2VydmVyL2FydGljbGUvYWRkIiwKICAgICAgICAgICAgICAgICAgZGF0YTogX3RoaXMuZm9ybQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgIF95aWVsZCRfdGhpcyQkYXhpb3MgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgICAgZGF0YSA9IF95aWVsZCRfdGhpcyQkYXhpb3MuZGF0YTsKCiAgICAgICAgICAgICAgICBpZiAoIWRhdGEuY29kZSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNjsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgX3RoaXMuJG1lc3NhZ2UuZXJyb3IoZGF0YS5tc2cpKTsKCiAgICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgICAgLy/ot7PovazliLDlr7nlupTnmoTmlofnq6DpobXpnaIKICAgICAgICAgICAgICAgIF90aGlzLiRyb3V0ZXIucHVzaCgiL2FydGljbGUvIi5jb25jYXQoZGF0YS5kYXRhLmlkKSk7CgogICAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICAvL+a3u+WKoG1k5paH5Lu255qE5ZCE56eN5qOA5rWLCiAgICBmaWxlQ2hhbmdlOiBmdW5jdGlvbiBmaWxlQ2hhbmdlKGZpbGUsIGZpbGVMaXN0KSB7CiAgICAgIGlmIChmaWxlLnN0YXR1cyAhPT0gJ3JlYWR5JykgcmV0dXJuOyAvL+eugOWNleWIpOaWreaYr+WQpuaYry5tZOaWh+S7tgoKICAgICAgaWYgKC9eKC4rKVwubWQkLy50ZXN0KGZpbGUubmFtZSkpIHsKICAgICAgICAvL+W9k+ayoeaciei+k+WFpXRpdGxl55qE5pe25YCZ77yM6I635Y+W5ZCN5a2X5aGr5YWF5YiwdGl0bGUKICAgICAgICBpZiAodGhpcy5mb3JtLnRpdGxlKSByZXR1cm47CiAgICAgICAgdGhpcy5mb3JtLnRpdGxlID0gUmVnRXhwLiQxOwogICAgICB9IGVsc2UgewogICAgICAgIC8v5o+Q56S65bm26Zi75q2i5paH5Lu25re75YqgCiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcigi5Y+q6IO95LiK5LygIC5tZCDmlofku7YiKTsKICAgICAgICBmaWxlTGlzdC5wb3AoKTsKICAgICAgfQogICAgfSwKICAgIC8v5Yig6ZmkbWTmlofku7bkuYvliY3nmoTpkqnlrZAKICAgIGJlZm9yZVJlbW92ZTogZnVuY3Rpb24gYmVmb3JlUmVtb3ZlKCkgewogICAgICB0aGlzLmZvcm0udGl0bGUgPSAiIjsKICAgIH0sCiAgICAvL21k5LiK5Lyg5oiQ5Yqf55qE6ZKp5a2QCiAgICBtZF91cGxvYWRfc3VjY2VzczogZnVuY3Rpb24gbWRfdXBsb2FkX3N1Y2Nlc3MocmVzKSB7CiAgICAgIC8vbWTkuIrkvKDlpLHotKUKICAgICAgaWYgKHJlcy5jb2RlKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuJG1lc3NhZ2UuZXJyb3IoIuS4iuS8oG1k5aSx6LSl77yM6K+35qOA5p+l5ZCO56uv5oql6ZSZIik7CiAgICAgIH0gLy9tZOS4iuS8oOaIkOWKnwoKCiAgICAgIHRoaXMuZm9ybS5tZCA9IHJlcy51cmw7IC8v5Yik5pat5piv5ZCm5pyJ5bCB6Z2i5Zu+CgogICAgICBpZiAodGhpcy5pbWFnZVVybCkgewogICAgICAgIC8v5pyJ5bCB6Z2i5Zu+77yM6Kem5Y+R5bCB6Z2i5Zu+55qE5LiK5LygCiAgICAgICAgdGhpcy4kcmVmcy5pbWdGb3JtLnN1Ym1pdCgpOwogICAgICB9IGVsc2UgewogICAgICAgIC8v5rKh5pyJ5bCB6Z2i5Zu+77yM55u05o6l5Y+R6KGo5paH56ugCiAgICAgICAgdGhpcy5zdWJtaXQoKTsKICAgICAgfQogICAgfSwKICAgIC8v5re75Yqg5bCB6Z2i55qE6ZKp5a2QCiAgICBjb3ZlckNoYW5nZTogZnVuY3Rpb24gY292ZXJDaGFuZ2UoZmlsZSwgZmlsZUxpc3QpIHsKICAgICAgaWYgKGZpbGUuc3RhdHVzICE9PSAncmVhZHknKSByZXR1cm47CiAgICAgIHZhciBpc0pQRyA9IC9eaW1hZ2VcLyhqcGVnfHBuZykkLy50ZXN0KGZpbGUucmF3LnR5cGUpOwogICAgICB2YXIgaXNMdDJNID0gZmlsZS5yYXcuc2l6ZSAvIDEwMjQgLyAxMDI0IDwgMjsKCiAgICAgIGlmICghaXNKUEcpIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfkuIrkvKDlpLTlg4/lm77niYflj6rog73mmK8gSlBHL1BORyDmoLzlvI8hJyk7CiAgICAgIH0KCiAgICAgIGlmICghaXNMdDJNKSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign5LiK5Lyg5aS05YOP5Zu+54mH5aSn5bCP5LiN6IO96LaF6L+HIDJNQiEnKTsKICAgICAgfQoKICAgICAgaWYgKGlzSlBHICYmIGlzTHQyTSkgewogICAgICAgIHRoaXMuaW1hZ2VVcmwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGZpbGUucmF3KTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmltYWdlVXJsID0gIiI7CiAgICAgICAgZmlsZUxpc3QucG9wKCk7CiAgICAgIH0KICAgIH0sCiAgICAvL+WwgemdouS4iuS8oOaIkOWKnwogICAgY292ZXJfdXBsb2FkX3N1Y2Nlc3M6IGZ1bmN0aW9uIGNvdmVyX3VwbG9hZF9zdWNjZXNzKHJlcykgewogICAgICBpZiAocmVzLmNvZGUpIHsKICAgICAgICByZXR1cm4gdGhpcy4kbWVzc2FnZS5lcnJvcigi5LiK5Lyg5bCB6Z2i5aSx6LSl77yM6K+35qOA5p+l5ZCO56uv5oql6ZSZIik7CiAgICAgIH0KCiAgICAgIHRoaXMuZm9ybS5jb3ZlciA9IHJlcy51cmw7CiAgICAgIHRoaXMuc3VibWl0KCk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["C:\\Users\\fly\\Desktop\\vue\\vue-08-实战\\开发版本\\client\\src\\components\\Admin\\ArticleAdd.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div id=\"ArticleAdd\">\r\n    <el-form\r\n      :model=\"form\"\r\n      status-icon\r\n      ref=\"ruleForm\"\r\n      label-width=\"100px\"\r\n    >\r\n      <el-form-item label=\"标题：\" label-width=\"100px\">\r\n        <el-input\r\n          v-model=\"form.title\"\r\n          placeholder=\"可通过上传 md 自动获取文件名\"\r\n        ></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"描述：\" label-width=\"100px\">\r\n        <el-input type=\"textarea\" v-model=\"form.des\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"md上传：\" label-width=\"100px\">\r\n        <el-upload\r\n          class=\"upload-demo\"\r\n          drag\r\n          :action=\"`${baseURL}/adminServer/article/md`\"\r\n          :auto-upload=\"false\"\r\n          :on-change=\"fileChange\"\r\n          :on-success=\"md_upload_success\"\r\n          :before-remove=\"beforeRemove\"\r\n          :limit=\"1\"\r\n          ref=\"mdForm\"\r\n          :with-credentials=\"true\"\r\n        >\r\n          <i class=\"el-icon-upload\"></i>\r\n          <div class=\"el-upload__text\">将.md文件拖到此处，或<em>点击上传</em></div>\r\n        </el-upload>\r\n      </el-form-item>\r\n      <el-form-item label=\"封面图上传：\" label-width=\"100px\">\r\n        <el-upload\r\n          class=\"avatar-uploader\"\r\n          :action=\"`${baseURL}/adminServer/article/cover`\"\r\n          :show-file-list=\"false\"\r\n          :on-change=\"coverChange\"\r\n          :on-success=\"cover_upload_success\"\r\n          :auto-upload=\"false\"\r\n          ref=\"imgForm\"\r\n          :with-credentials=\"true\"\r\n        >\r\n          <div\r\n            v-if=\"imageUrl\"\r\n            class=\"avatar\"\r\n            :style=\"{\r\n              backgroundImage: `url(${imageUrl})`\r\n            }\"\r\n          >\r\n          </div>\r\n          <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\r\n        </el-upload>\r\n      </el-form-item>\r\n      <el-form-item label-width=\"100px\">\r\n        <el-button type=\"primary\" @click=\"submitForm\">确认发表</el-button>\r\n      </el-form-item>\r\n    </el-form>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"ArticleAdd\",\r\n  data() {\r\n    return {\r\n      form: {\r\n        title: \"\",\r\n        des: \"\",\r\n        md: \"\",\r\n        cover: \"\"\r\n      },\r\n      imageUrl: \"\"\r\n    }\r\n  },\r\n  methods: {\r\n    //发表按钮点击\r\n    submitForm() {\r\n      //从上传md开始，后续的上传在对应的回调里面完成\r\n      this.$refs.mdForm.submit()\r\n    },\r\n\r\n    //文章发表\r\n    async submit() {\r\n      let {data} = await this.$axios({\r\n        method: \"POST\",\r\n        url: \"/adminServer/article/add\",\r\n        data: this.form\r\n      })\r\n\r\n      if (data.code) {\r\n        return this.$message.error(data.msg)\r\n      }\r\n\r\n      //跳转到对应的文章页面\r\n      this.$router.push(`/article/${data.data.id}`)\r\n    },\r\n\r\n    //添加md文件的各种检测\r\n    fileChange(file, fileList) {\r\n      if (file.status !== 'ready') return\r\n      //简单判断是否是.md文件\r\n      if (/^(.+)\\.md$/.test(file.name)) {\r\n        //当没有输入title的时候，获取名字填充到title\r\n        if (this.form.title) return\r\n        this.form.title = RegExp.$1\r\n      } else {\r\n        //提示并阻止文件添加\r\n        this.$message.error(\"只能上传 .md 文件\")\r\n        fileList.pop()\r\n      }\r\n    },\r\n\r\n    //删除md文件之前的钩子\r\n    beforeRemove() {\r\n      this.form.title = \"\"\r\n    },\r\n\r\n    //md上传成功的钩子\r\n    md_upload_success(res) {\r\n\r\n      //md上传失败\r\n      if (res.code) {\r\n        return this.$message.error(\"上传md失败，请检查后端报错\")\r\n      }\r\n\r\n      //md上传成功\r\n      this.form.md = res.url\r\n      //判断是否有封面图\r\n      if (this.imageUrl) {\r\n        //有封面图，触发封面图的上传\r\n        this.$refs.imgForm.submit()\r\n      } else {\r\n        //没有封面图，直接发表文章\r\n        this.submit()\r\n      }\r\n    },\r\n\r\n    //添加封面的钩子\r\n    coverChange(file, fileList) {\r\n      if (file.status !== 'ready') return\r\n\r\n      const isJPG = /^image\\/(jpeg|png)$/.test(file.raw.type);\r\n      const isLt2M = file.raw.size / 1024 / 1024 < 2;\r\n\r\n      if (!isJPG) {\r\n        this.$message.error('上传头像图片只能是 JPG/PNG 格式!');\r\n      }\r\n      if (!isLt2M) {\r\n        this.$message.error('上传头像图片大小不能超过 2MB!');\r\n      }\r\n      if (isJPG && isLt2M) {\r\n        this.imageUrl = URL.createObjectURL(file.raw);\r\n      } else {\r\n        this.imageUrl = \"\"\r\n        fileList.pop()\r\n      }\r\n    },\r\n\r\n    //封面上传成功\r\n    cover_upload_success(res) {\r\n      if (res.code) {\r\n        return this.$message.error(\"上传封面失败，请检查后端报错\")\r\n      }\r\n      this.form.cover = res.url\r\n      this.submit()\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n#ArticleAdd {\r\n  /deep/ .avatar-uploader .el-upload {\r\n    border: 1px dashed #d9d9d9;\r\n    border-radius: 6px;\r\n    cursor: pointer;\r\n    position: relative;\r\n    overflow: hidden;\r\n  }\r\n\r\n  /deep/ .avatar-uploader .el-upload:hover {\r\n    border-color: #409EFF;\r\n  }\r\n\r\n  /deep/ .avatar-uploader-icon {\r\n    font-size: 28px;\r\n    color: #8c939d;\r\n    width: 178px;\r\n    height: 178px;\r\n    line-height: 178px;\r\n    text-align: center;\r\n  }\r\n\r\n  /deep/ .avatar {\r\n    width: 178px;\r\n    height: 178px;\r\n    display: block;\r\n    background: none center center/cover;\r\n  }\r\n}\r\n\r\n</style>\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n"],"sourceRoot":""}]}